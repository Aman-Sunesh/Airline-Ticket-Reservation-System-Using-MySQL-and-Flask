<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Staff Dashboard — Airline Reservation</title>
  <style>
    :root { --bg:#f7f7fb; --card:#ffffff; --fg:#1c1c1c; --muted:#666; --border:#e6e6ea; --accent:#111; }
    * { box-sizing:border-box }
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:var(--bg);color:var(--fg)}
    header{display:flex;align-items:center;justify-content:space-between;background:var(--accent);color:#fff;padding:16px 20px}
    header h1{margin:0;font-size:18px;display:flex;align-items:center;gap:10px}
    header img.logo{height:28px;background:#fff;border-radius:6px;padding:3px}
    header nav a{color:#fff;text-decoration:none;margin-left:14px}
    main{max-width:980px;margin:28px auto;padding:0 16px}

    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin:16px 0}
    .card{display:block;padding:14px;border:1px solid var(--border);border-radius:12px;background:#fff;text-decoration:none;color:inherit}

    table{width:100%;border-collapse:collapse;margin-top:12px;background:#fff}
    th,td{border:1px solid var(--border);padding:8px;text-align:left;vertical-align:top}
    th{background:#fafafa}
    .muted{color:var(--muted)}
    .actions a{font-size:.9em;text-decoration:none}
  </style>
</head>
<body>
  <header>
    <h1>
      Airline Reservation
      {% if session.get('airline_name') %}
        {# Map airline name to filename like "air_canada.png", "jet_blue.png" (same rule as home.html) #}
        {% set logo_name = (session.get('airline_name')
                            |lower
                            |replace(' ', '_')
                            |replace('&','and')
                            |replace('.','')
                            |replace('-','')) ~ '.png' %}
        <img class="logo" src="{{ url_for('static', filename='airlines/' ~ logo_name) }}"
             alt="{{ session.get('airline_name') }} logo">
      {% endif %}
    </h1>
    <nav>
      {% if session.get('display_name') %}
        <span style="opacity:.85;margin-right:12px">Hi, {{ session.get('display_name') }}</span>
        <a href="{{ url_for('home') }}">Home</a>
        <a href="{{ url_for('logout') }}">Logout</a>
      {% else %}
        <a href="{{ url_for('home') }}">Home</a>
        <a href="{{ url_for('login') }}">Login</a>
        <a href="{{ url_for('register') }}">Register</a>
      {% endif %}
    </nav>
  </header>

  <main>
    <h2 style="margin:18px 6px 6px">
      Staff Dashboard{% if session.get('airline_name') %} · {{ session.get('airline_name') }}{% endif %}
    </h2>

    <!-- All 7 staff features -->
    <div class="grid">
      <a class="card" href="{{ url_for('staff_view_flights') }}">View Flights</a>
      <a class="card" href="{{ url_for('create_flight_form') }}">Create Flight</a>
      <a class="card" href="{{ url_for('staff_manage_status') }}">Manage Flight Status</a>
      <a class="card" href="{{ url_for('add_airplane_form') }}">Add Airplane</a>
      <a class="card" href="{{ url_for('list_my_airplanes') }}">My Airplanes</a>
      <a class="card" href="{{ url_for('staff_ratings') }}">View Flight Ratings</a>
      <a class="card" href="{{ url_for('staff_reports') }}">Reports</a>
    </div>

    <h3>Upcoming Flights (My Airline)</h3>
    {% if flights %}
      <table>
        <tr>
          <th>Flight #</th>
          <th>From</th>
          <th>To</th>
          <th>Departure</th>
          <th>Status</th>
          <th class="actions">Actions</th>
        </tr>
        {% for f in flights %}
          <tr>
            <td>{{ f.flight_no }}</td>
            <td>{{ f.src }}</td>
            <td>{{ f.dst }}</td>
            <td>{{ f.dep_datetime }}</td>
            <td>{{ f.status }}</td>
            <td class="actions">
              <a href="{{ url_for('staff_manage_status') }}">Edit status</a> ·
              <a href="{{ url_for('staff_view_flights') }}">View flights</a>
            </td>
          </tr>
        {% endfor %}
      </table>
    {% else %}
      <p class="muted">No flights to display yet.</p>
    {% endif %}
  </main>
</body>
</html>
